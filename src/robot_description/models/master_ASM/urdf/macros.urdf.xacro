<?xml version="1.0" encoding="utf-8"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

<xacro:macro name="wheel_link" params="name pretty:=^|true wheelRadius:=^ wheelWidth:=^ wheelMass:=^">

    <link name="${name}">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="${wheelMass}" />
            <inertia
                ixx="0.0059462"
                ixy="0"
                ixz="0"
                iyy="0.0059468"
                iyz="0"
                izz="0.0072591" />
        </inertial>

        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
            <xacro:if value="${pretty}">
                <mesh
                filename="../meshes/ASM_Drive_Assembly.STL" scale="0.001 0.001 0.001"/> <!-- stl is measured in mm, need m -->
            </xacro:if>
            <xacro:unless value="${pretty}">
                <cylinder radius="${wheelRadius}" length="${wheelWidth}" />
            </xacro:unless>
            </geometry>
            <material name="grey" />
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder radius="${wheelRadius}" length="${wheelWidth}" />
            </geometry>
        </collision>
    </link>


</xacro:macro>

<xacro:macro name="wheel_joint" params="wheel x y z">
    <joint
        name="${str(wheel) + '_joint'}"
        type="continuous">
        <origin
            xyz="${x} ${y} -${z}"
            rpy="${pi/2} 0 ${pi/2}" />
        <parent link="frame_link" />
        <child link="${str(wheel) + '_link'}" />
        <axis
        xyz="0 0 -1" />
    </joint>
</xacro:macro>

</robot>